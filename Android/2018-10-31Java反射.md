# Java反射

1，获取该类的Class Type；

2，通过getMethod方法获取Method对象/getField方法获取Field；

3，通过调用invoke方法来执行对象的某个方法/set方法修改Field；

## 1.Class对象

3种方法获取`Class对象`

```java
1 Class.forName();//完整类名
Class clazz = Class.forName("com.example.sort.Counter")
```

```java
2 .getClass() //通过对象获取
Counter counter = new Counter();
Class clazz = counter.getClass()
```

```java
3 . class //直接通过类获取
 Class clazz = Counter.class;
```

## 2.Method/Field

```java
 			//获取公共Field
            Field[] fields = clazz.getFields();
            Field field = clazz.getField("FieldName");
            //获取私有Field
            Field[] clazzDeclaredFields = clazz.getDeclaredFields();
            Field name = clazz.getDeclaredField("name");
```

```java
//获取公共Method
Method[] methods = clazz.getMethods();
Method clazzMethod = clazz.getMethod("MethodName", String.class);//第一个参数为方法名，第二个为方法参数类型
//获取私有Method
Method[] declaredMethods = clazz.getDeclaredMethods();
Method show = clazz.getDeclaredMethod("show", String.class);//第一个参数为方法名，第二个为方法参数类型
```

## 3.调用方法/修改Field

```java
  name.set(counter, "李四");//第一个参数为对象实例，第二个为值
```

```java
Object result = show.invoke(counter, "hello reflect");//第一个参数为对象实例，第二个为方法参数 result为方法返回值
```

## 4.注意

```java
//若需要操作私有属性或方法需要使用前添加以下代码 取消java语言检查，否则将抛出IllegalAccessException.
name.setAccessible(true);//压制java检查机制  使得private Field可访问
show.setAccessible(true);//压制java检查机制  使得private Method可访问
```

## Counter.class

```java
public class Counter {
    private String name;
    private int age;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public Counter(String name, int age) {

        this.name = name;
        this.age = age;
    }

    private void show(String s) {
        Log.v("Az", s);
    }
}
```