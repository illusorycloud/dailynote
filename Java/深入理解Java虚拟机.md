# 深入理解Java虚拟机

## 第一章 走进Java

### 展望Java技术的未来

模块化

混合语言 项目中每个应用层使用不同的需要，发挥各自的优点，中间层使用Java。

多核并行 

进一步丰富语法  

64位虚拟机

## 第二章 自动内存管理机制

### 2.1 运行时数据区

#### 1.程序计数器   

线程独立的。可以看做是当前线程所执行的字节码的行号指示器，字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令。

#### 2.java虚拟机栈

生命周期和线程相同，线程独立。每个方法在执行时都会创建一个栈帧用于存储局部变量表，操作数栈，动态链接，方法出口等信息。每一个方法从调用到执行完成的过程就是一个栈帧在虚拟机中的入栈到出栈的过程。

局部变量表：存放了编译时期可知的各种基本类型（Boolean，byte，char,short,int.float.long,double）、对象引用（reference类型）和returnAddress（指向了一条字节码指令的地址）

#### 3.本地方法栈

和Java虚拟机栈作用相似，不过这是为虚拟机执行Native方法服务的，线程独立的。

#### 4.堆

Java堆是虚拟机所管理的内存中最大的一块了。线程共享，在虚拟机启动时创建。也是垃圾回收的主要区域。Java虚拟机规范中说的是：所有的对象实例以及数组都要在堆上分配内存。但是随着`JIT(just in time)编译器`的发展与`逃逸分析`技术的成熟，`栈上分配`，`标量替换`优化技术将会导致一些微妙的变化，所有对象都分配在堆上也变得不是那么绝对了。

垃圾回收器都采用分代回收算法。所以Java堆可以细分为`新生代`和`老年代`。在细致一点可以分为`Eden空间`，`From Survivor`,`To Survivor`等。

#### 5.方法区

也是线程共享的区域。用于存储已被虚拟机加载的`类信息`,`常量`，`静态变量`，`即时编译器编译后的代码`等数据。

java虚拟机把方法区描述为堆的一个逻辑区域，但是方法区却有一个别名`Non-Heap非堆`目的应该是和Java堆区分开。

#### 6.运行时常量池

