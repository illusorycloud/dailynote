# MySQL数据类型



# 1. 数据值类别

MySQL支持多种常规类别的数据值，包括数值、字符串、时间、日期这样的时态值空间值以及NULL值。

### 1. 数值

MySQL能识别的数值包括整数(无小数位)、定点数或浮点数以及位域值(bit-field value)

位域值可以写成`b'val'`或者`0bval`,val由一个或多个二进制数字构成。

例如:`b'1010`或者`0b1010`



### 2. 字符串

字符串尽量使用单引号。具体原因如下：

* 1.SQL语言标准规定使用单引号
* 2.如果启用了SQL模式`ANSI_QUOTES`,那么MySQL会将双引号处理成将标识符引起来的符号，而不会只把它当成字符串引起来的符号。

例子：

```mysql
SELECT "last_name" FROM president;
```

如果开启了`ANSI_QUOTES`模式，那么会从president表中取`last_name`列的值

如果没开则会为该表的每行选取一次字符串`last_name`

MySQL能识别出字符串里的转义符号(`\`)。

#### 1. 字符集

字符串一般可以分为二进制串和非二进制串。

二进制串是一组字节序列。

非二进制串是一个字符序列。每个非二进制串都与字符集有关。

字符集决定了：哪些字符串可以用；MySQL会如何解释字符串的内容。

### 3. 时态值

时态值包括日期值或时间值。

如`2012-06-17`或`12:30:43`

也可以合并在一起`2012-06-17 12:30:43`

MySQL是按`年-月-日`的顺序来表示日期的。

### 4. 空间值

MySQL支持`空间值`，可以让我们直接表示想点、线、多边形这样的值。

### 5. 布尔值

`布尔值`:任何非零非NULL的值都会被当做真，布尔常量TRUE和FLASE分别被当作1和0，不区分大小写。

### 6. NULL值

`NULL`值是一种没有类型的值。通常用来表示无值、未知值、缺失值、超界等。



## 2. MySQL数据类型

建表时必须为每一列指定数据类型,列的数据类型比值分类更具体，如`smallint`和`varchar(32)`。



### 1. 列的默认值

可以使用`DEFAULT def_value`子句为列指定默认值，其中默认值`def_value`必须是一个常量，不能为表达式也不能引用其他列。

如果没设置默认值：如果列可以为NULL则会设置为NULL；如果不能为NULL则根据是否启用SQL严格模式：

* 1.未启用则会设置为其数据类型的隐含默认值
* 2.启用后如果是事务表则会出现错误。若不是事务表则只会在insert第一行时报错，insert后续行则可以手动选择报错停止或者设置为隐含默认值。



### 3. 字符串数据类型

#### 1. CHAR和VARCHAR

`CHAR`和`VARCHAR`主要用于保存非二进制数据。

* CHAR是一种长度固定的类型，VARCHAR是一种长度可变的类型。
* 从CHAR检索出来的值，其尾部空格会被移除，对于CHAR(M)列如果存入时长度小于M则会用空格补齐到M，但是在检索时这些空格会被移除。
* 对于VARCHAR列，其尾部空格在存储和检索时都会保留。



CHAR最大长度M取值范围是0~255,如果省略M则默认是CHAR(1)。

> CHAR(0)也是允许的，如果CHAR(0)列可以为NULL那么取值只有NULL和空串两种，CHAR(0)只占用很少的空间(1个二进制位)可以用来表示`开/关`值。

VARCHAR最大长度M取值范围是0~65535，但是实际容量肯定是小于65535的，因为MySQL中行的最大长度是65535个字节，影响因素如下：

* 1.一个长VARCHAR列需要两个字节来存放字符串的长度
* 2.表里其他列也会占一部分空间
* 3.使用多字节字符会减少字符个数，最终长度不会超过最大长度。
* 4.MyISAM表处理固定长度行效率比可变长度高，如果各个值长度差别不大选用CHAR往往会比VARCHAR好。



#### 2. BINARY和VARBINARY

BINARY和VARBINARY与`CHAR`和`VARCHAR`类似。

* `CHAR`和`VARCHAR`主要用于存储字符的非二进制类型。
* `BINARY`和`VARBINARY`主要用于存储字节的二进制类型。

同样 BINARY(M)不足时会用0x00补齐，但是在检索时不会去掉。

VARBINARY则不会进行任何操作。



#### 3. BLOB和TEXT

> 一般不推荐使用这两个。

blob指的是二进制大对象(binary large object),实际上是一个可以存放任何内容的容器。

BLOB是个类型系列，共包括四种BLOB类型：TinyBlob、Blob、MediumBlob、LongBlob，这几个类型之间的唯一区别是在存储文件的最大尺寸不同。

TEXT与BLOB类似，但是TEXT是存储字符非二进制数据串，BLOB是存储字节的二进制串。

TEXT也是个类型系列，共包括四种TEXT类型：TINYTEXT, TEXT, MEDIUMTEXT,LONGTEXT。

| 字段类型              | 最大长度（字节） | 存储需求                          |
| --------------------- | ---------------- | --------------------------------- |
| TinyBlob/TINYTEXT     | 2^8-1            | 值的长度加上用于记录长度的1个字节 |
| Blob/TEXT             | 2^16-1           | 值的长度加上用于记录长度的2个字节 |
| MediumBlob/MEDIUMTEXT | 2^24-1           | 值的长度加上用于记录长度的3个字节 |
| LongBlob/LONGTEXT     | 2^32-1           | 值的长度加上用于记录长度的4个字节 |

#### 4. ENUM和SET数据类型

ENUM和SET是比较特殊的字符串类型，只能从事先定义好的字符串列表里取值。主要区别是：ENUM列值必须包含且只能包含`一个`值列表成员。SET列值允许包含`任意多个`(可以为空)。

ENUM类型定义的是枚举集合，它最多允许65535个成员。

> 比如性别可以用ENUM（'男'，'女')

SET类型最多允许有64个成员。

> 让用户从固定列表中进行多选时可以用SET。



ENUM和SET在创建是虽然都是字符串类型吗，但是它们的成员在内部存储形式是数字。

MySQL将从1开始对ENUM列定义里的成员进行顺序编号(0被保留为错误码)。

占用大小由枚举值个数决定。

>  1字节可以保存256个值，2字节能存65536个值。

SET与ENUM稍有不同，并未按顺序编号，每个SET成员对应SET值里的一个二进制位。

64个成员最多占8字节。