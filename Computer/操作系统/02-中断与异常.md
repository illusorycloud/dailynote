# 中断与异常

## 概念

* 1.CPU对系统发生的某个事件作出的一种反应。
* 2.CPU暂停正在执行的程序，`保留现场`后`自动`转去执行相应事件的处理程序，处理完成后返回断点，继续执行被打断的程序。

### 特点

* 1.是随机发生的
* 2.是自动处理的
* 3.是可恢复的

## 为什么要引入中断与异常

### 中断

为了支持CPU与设备之间的并行操作。

> 当CPU启动设备进行输入/删输出之后即可去做其他事情，等该设备执行完成之后通过向CPU发起中断报告此次输入/输出的结果，让CPU决定如何处理以后的事

### 异常

表示CPU执行指令时本身出现的问题。

> 比如算术溢出，除零，取数时的奇偶错，访问地址越界等，发生异常之后硬件改变当前CPU的执行流程，转到相应的错误处理程序或异常处理程序或执行系统调用

## 事件

* 中断(外中断)：外部事件，正在运行的程序所不期望的
  * I/O中断
  * 时钟中断
  * 硬件故障
* 异常(内中断)：由正在执行的指令引发
  * 系统调用
  * 页故障/页错误
  * 保护性异常
  * 断点指令
  * 其他程序性异常(如算术溢出等)

## 小结

| 类别          | 原因                      | 同步/异步 | 返回行为             |
| ------------- | ------------------------- | --------- | -------------------- |
| 中断Interrupt | 来着I/O设备、其他硬件部件 | 异步      | 总是返回到下一条指令 |
| 陷入Tarp      | 有意识安排的              | 同步      | 返回到下一条指令     |
| 故障Fault     | 可恢复的错误              | 同步      | 返回当前指令         |
| 终止Abort     | 不可恢复的错误            | 同步      | 不会返回             |


