## mmap 映射

etcd 在启动的时候会通过 mmap 机制将 etcd db 文件映射到 etcd 进程地址空间，并设置了 mmap 的 MAP_POPULATE flag，它会告诉 Linux 内核预读文件，Linux 内核会将文件内容拷贝到物理内存中，此时会产生磁盘 I/O。

* 节点内存足够的请求下，后续处理读请求过程中就不会产生磁盘 I/IO 了。

* 若 etcd 节点内存不足，可能会导致 db 文件对应的内存页被换出，当读请求命中的页未在内存中时，就会产生缺页异常，导致读过程中产生磁盘 IO。

你可以通过观察 etcd 进程的 majflt 字段来判断 etcd 是否产生了主缺页中断。